<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/x-icon" href="./favicon.ico" />
    <!-- CDN for jQuery and select2 -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.7/js/select2.min.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JukeBox</title>
    <meta name="application-name" content="JukeBox" />
    <meta name="apple-mobile-web-app-title" content="JukeBox">
    <meta name="description" content="JukeBox is a mod of Slarmoo's Box that aims to add a crap ton of presets." />
    <meta name="keywords" content="chiptune, instrumental, music, song, melody, composition, tool, free, online, square wave, NES, NSF, jukebox, ultrabox, beepbox, jummbox, pandorasbox, modbox, sandbox, goldbox, wackybox, todbox, slarmoo's box" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="theme-color" content="#ad7760" />
    <meta name="msapplication-TileColor" content="#ad7760" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    <meta name="format-detection" content="telephone=no" />
    <meta property="og:image" content="https://jukeebox.github.io/icon_shadow_192.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="./icon_32.png" />
    <link rel="manifest" href="./manifest.webmanifest" />
    <link href="https://fonts.googleapis.com/css?family=B612" rel="stylesheet" media="none" onload="if (this.media != 'all') this.media='all';" /> <!-- this is a trick to load CSS asynchronously. -->
    <style type="text/css">

        html {
            background: var(--page-margin, black);
            overflow-x: hidden;
            font-size: large;
            font-family: 'B612', sans-serif;
            line-height: 1.3;
            color: var(--primary-text, white);
        }

        body {
            margin: auto;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            align-content: center;
        }

        #beepboxEditorContainer {
            min-height: 645px;
            overflow: auto;
            background: var(--editor-background, black);
            width: 100%;
			max-width: 710px;
            padding-left: 30px;
            padding-right: 30px;
        }

        #text-content {
            overflow: auto;
            background: var(--editor-background, black);
            width: 100%;
			max-width: 710px;
            padding-left: 30px;
            padding-right: 30px;
        }

        #Hotdog { display: none; }

        h1 {
            font-size: 1.7rem;
            text-align: center;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            -webkit-text-stroke-width: 0;
            color: var(--mod-title, #8C5D49);
        }

        h2 {
            font-size: 1.5rem;
            text-align: center;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
            -webkit-text-stroke-width: 0;
        }

        .centerDiv {
			margin: 0px auto;
		}

        a {
            color: var(--link-accent, #98f);
        }

        .donation form {
            display: inline;
        }

        .donation input[type="submit"] {
            appearance: none;
            -webkit-appearance: none;
            background: none;
            border: none;
            font-family: inherit;
            font-size: inherit;
            color: var(--link-accent, #98f);
            text-decoration: underline;
            cursor: pointer;
            padding: 0;
            margin: 0;
        } 

        /* wide screen */
		@media (min-width: 711px) {
            html {
                width: 100%;
            }

            body {
                width: 100%;
            }

            .column-container {
				width: 710px;
                display: flex;
				gap: 25px;
            }

            .instructions-column {
				min-width: 0;
            }

            .bsky-column {
				width: 300px;
				flex-shrink: 0;
			}
        }

        /* narrow screen */
		@media (max-width: 710px) {
            body {
                width: 100%;
            }

            p, .donation {
                margin: 1em 0.5em;
            }

            .column-container {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body id="secondImage">
    <script>
        const image = localStorage.getItem('customTheme2');
        const el  = document.getElementById('secondImage');
        if (image != null && image !== "null" && image !== "undefined") {
            el.style.backgroundImage="url(" + image + ")";
            el.style.backgroundRepeat= "repeat";
        }
    </script>
    <div id="beepboxEditorContainer">
        <noscript>
            Sorry, JukeBox requires a JavaScript-enabled browser.
        </noscript>
    </div>
    <div id="text-content">
        <section>

            <h1>
                <font>JukeBox</font>
                <span id="goldboxPlant" style="display: inline; color:#62a13b"></span>
                <!-- <span id="goldboxPlant" style="display: inline; color: var(--plant-color, var(--link-accent, #62a13b));"></span> -->
            </h1>
            
            <p id="introduction">
                JukeBox is a mod of Slarmoo's Box that aims to add a crap ton of presets. <br>
                (see <a onclick="window.open('/website/Manual/credits.html')">credits</a>).
            </p>
            <!-- <p>
                All song data is contained in the URL at the top of your browser.
                When you make changes to the song, the URL is updated to reflect your changes.
                When you are satisfied with your song, just copy and paste the URL to save and share your song!
            </p> -->
            <p>
                If you want to upload your own presets to JukeBox, you can fill out <a onclick="window.open('https:/\/forms.gle/B29T3gCRHB6srueB8')">This Form</a>
            </p>
    <div class="donation">
        BeepBox is a passion project, and will always be free to use. If you find it valuable and have the means, please feel free to show your gratitude to the original creator of Beepbox here: 
        <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
            <input type="hidden" name="cmd" value="_donations" />
            <input type="hidden" name="business" value="QZJTX9GRYEV9N" />
            <input type="hidden" name="currency_code" value="USD" />
            <input type="submit" name="submit" value="Paypal"/>
        </form>
        <br><br>
        Additionally, Slarmoo's Box, which is the basis of JukeBox, takes a lot of time to make and update. If you have found it valuable and are able to do so, please consider donating to Slarmoo here: 
        <form action="https://www.paypal.com/donate/?hosted_button_id=BMLD7HPKFR6NG" method="post" target="_blank">
            <input type="submit" name="submit" value="Paypal" />
        </form>
        <br><br>
                <section>
                    <h2>
                        About
                    </h2>
                    <p>
                        JukeBox, developed by CoolTasDude, is a mod of Slarmoo's Box which is a mod of UltraBox which ported features from Pandora's Box into GoldBox which are both mods of JummBox which is a mod of BeepBox.
                    </p>
                    <p>
                        JukeBox does not claim ownership over songs created with it, so original songs belong to their authors.
                    </p>
                    <p>
                        Neither JukeBox nor its creators assume responsibility for any copyrighted material played on JukeBox. No songs are ever received, recorded, or distributed by JukeBox's servers. All song data is contained in the URL after the hash (#) mark, and JukeBox running inside your browser converts that data into sound waves.
                    </p>
                    <p>
                        JukeBox does not collect, track, or share any user data.
                    </p>
                </section>
    </div>
        <br><br>
            <div style="justify-content: center; display: flex; cursor: pointer;">
                <div onclick="window.open('./manual/introduction.html')" style="height: 80px; background: black; width: 420px; border-radius: 20px; border: solid 1px #444; display: flex; flex-direction: row; align-items: center;">
                    <div style="height: 100%;width: 80px;border-right: 1px solid #444;/*! border-radius: 10px; */background-image: url(./image_assets/manual_brown.png);background-size: 90%;background-repeat: no-repeat;background-position: center;"></div>
                    <div style="flex: 1;text-align: center;font-size: 21px;text-decoration: underline;color: #795548;">JukeBox Manual</div>
                </div>
            </div>
            <p></p>
            <div style="justify-content: center; display: flex; cursor: pointer;">
                <div onclick="window.open('//discord.gg/xSs9nABmP5')" style="height: 80px; background: black; width: 420px; border-radius: 20px; border: solid 1px #444; display: flex; flex-direction: row; align-items: center;">
                    <div style="height: 100%;width: 80px;border-right: 1px solid #444;/*! border-radius: 10px; */background-image: url(./image_assets/discord.png);background-size: 90%;background-repeat: no-repeat;background-position: center;"></div>
                    <div style="flex: 1;text-align: center;font-size: 21px;text-decoration: underline;color: #5865F2;">JukeBox Community Discord</div>
                </div>
            </div>
            <p></p>
            <div style="justify-content: center; display: flex; cursor: pointer;">
                <div onclick="window.open('//github.com/JukeeBox/JukeBox_TypeScript')" style="height: 80px; background: black; width: 420px; border-radius: 20px; border: solid 1px #444; display: flex; flex-direction: row; align-items: center;">
                    <div style="height: 100%;width: 80px;border-right: 1px solid #444;/*! border-radius: 10px; */background-image: url(./image_assets/github.png);background-size: 90%;background-repeat: no-repeat;background-position: center;"></div>
                    <div style="flex: 1;text-align: center;font-size: 21px;text-decoration: underline;color: white;">JukeBox Source Code</div>
                </div>
            </div>
            <p></p>
            <div style="justify-content: center; display: flex; cursor: pointer;">
                <div onclick="window.open('//beepbox-launchpad.github.io')" style="height: 80px; background: black; width: 420px; border-radius: 20px; border: solid 1px #444; display: flex; flex-direction: row; align-items: center;">
                    <div style="height: 100%;width: 80px;border-right: 1px solid #444;/*! border-radius: 10px; */background-image: url(./image_assets/launchpad.png);background-size: 90%;background-repeat: no-repeat;background-position: center;"></div>
                    <div style="flex: 1;text-align: center;font-size: 21px;text-decoration: underline;color: #7744FF;">BeepBox Launchpad</div>
                </div>
            </div>
            <p style="text-align: center;">Launchpad made by Slarmoo, Choptop84, and HappyLemonLime</p>
            <div style="justify-content: center; display: flex; cursor: pointer;">
                <div onclick="window.open('./bluesky', '_blank')" style="height: 80px; background: black; width: 420px; border-radius: 20px; border: solid 1px #444; display: flex; flex-direction: row; align-items: center;">
                    <div style="height: 100%;width: 80px;border-right: 1px solid #444;/*! border-radius: 10px; */background-image: url(./image_assets/bsky.png);background-size: 90%;background-repeat: no-repeat;background-position: center;"></div>
                    <div style="flex: 1;text-align: center;font-size: 21px;text-decoration: underline;color: #1185fe;"> Music on Bluesky</div>
                </div>
            </div>
            <br><br>
        </div>
    </div>

    <!--
    Instead of loading js beepbox editor interface directly, test for browser support.
    <script type="text/javascript" src="beepbox_editor.min.js"></script>
    -->
    <script type="text/javascript">

        // Randomize display of header
        
        const plants = [
        // jummbox/goldbox plants    
        "ðŸ‚", "ðŸŒ¿", "ðŸŒº", "ðŸƒ", "ðŸ„", "ðŸ€ðŸŒ·", "ðŸŒˆðŸ‚ðŸðŸ€ðŸŒ·ðŸ„ðŸ²ðŸŒˆðŸƒðŸŒºðŸ„", " 1ï¸âƒ£3ï¸âƒ£1ï¸âƒ£2ï¸âƒ£",
        //blubox plants
        "â‰½(â—• á´— â—•)â‰¼", "â‰½(á´— _ á´—)â‰¼", "â‰½(âŒ _ âŒ)â‰¼", "â‰½(áµ• â€¿ áµ•)â‰¼", 
        // familiarbox plant (there were others, but the code of familiarbox is long gone)
        // this is actually a reference to really old lore chippy made for one of their projects 
        "â˜€ï¸â­ðŸ•’ðŸ‘ï¸",
        // suggested by mel, meant to supplement the lack of a worm logo
        // (in case it doesn't show up, this is meant to be a worm emoji)
        "ðŸª±",
        // I believe this is from paandorasbox (might have also been present in familiarbox???? maybe not though...)
        //slarmoo - changed to not wackybox, because it isn't :p
        "not :wackybox:",
        // plant originally suggested by mel in reference to the "(don't) eat thegubbys" meme        
        "ðŸŸ",
        // blubox desktop plants 
        "âš¡","ðŸ”µ","ðŸ’«",
        // LemmBox 
		"ðŸ‹",
        // Slarmoo's Box plants
        "âœ¨","ðŸŒˆ","ðŸŒ§ï¸","ðŸª¨","ðŸ","ðŸŒ²","ðŸŒ³","ð“†","ðŸ¦€","ðŸ„â€ðŸŸ«","ðŸŒµ","and Bobby","ðŸ¥š",
        //Current version
        // I wonder how many times I'll forget about this
        "0.2.1",
        //JukeBox
        "(did someone say presets?)",
        ];
        const date = new Date();
        if (Math.floor(Math.random() * 0) == 0) { // plants always show up now
            document.getElementById("goldboxPlant").innerHTML = "  " + plants[(Math.floor(Math.random() * plants.length))];
            //Slarmoo's Box holiday plants
            const winterPlants = ["ðŸŽ„", "ðŸª", "â˜ƒï¸", "ðŸŽ", "â„ï¸"];
            if ((date.getDate() >= 22 && date.getDate() <= 26) && date.getMonth() == 11) {
                document.getElementById("goldboxPlant").innerHTML = "  " + winterPlants[(Math.floor(Math.random() * winterPlants.length))];
            }
            //Slarmoo's Box Halloween plants
            const spookyPlants = ["ðŸŽƒ", "ðŸ¬", "ðŸ‘»", "ðŸ", "ðŸ§ª"];
            if ((date.getDate() == 31) && date.getMonth() == 9) {
                document.getElementById("goldboxPlant").innerHTML = "  " + spookyPlants[(Math.floor(Math.random() * spookyPlants.length))];
            }
            //Slarmoo's Box valentines plants
            const heartPlants = ["â¤ï¸", "ðŸ§¡", "ðŸ’›", "ðŸ’š", "ðŸ’™", "ðŸ’œ"];
            if ((date.getDate() >= 13 && date.getDate() <= 15) && date.getMonth() == 1) {
                document.getElementById("goldboxPlant").innerHTML = "  " + heartPlants[(Math.floor(Math.random() * heartPlants.length))];
            }
            //Slarmoo's Box pi day plants
            if ((date.getDate() == 14) && date.getMonth() == 2) {
                const piePlants = ["Ï€", "ðŸ¥§", "ðŸ", "ðŸ‹", "3.14"];
                document.getElementById("goldboxPlant").innerHTML = "  " + piePlants[(Math.floor(Math.random() * piePlants.length))];
            }
        }
        if ((date.getDate() == 1) && date.getMonth() == 3) {
            const foolishPlants = ["Censorship Update", "19.8.4", "ðŸ‘ï¸", "ðŸ", "ðŸš«"];
            document.getElementById("goldboxPlant").innerHTML = "  " + foolishPlants[(Math.floor(Math.random() * foolishPlants.length))];
        }
        if ((date.getDate() == 13) && date.getMonth() == 4) {
            const years = date.getFullYear() - 2024;
            const birthdayPlants = [years + " year" + (years != 1 ? "s" : "") + "!", "ðŸŽ‚", "ðŸŽ‰", "Happy Birthday!", "Anniversary"];
            document.getElementById("goldboxPlant").innerHTML = "  " + birthdayPlants[(Math.floor(Math.random() * birthdayPlants.length))];
        }

        if(Math.random() * 10000 < 1) {
            document.getElementById("goldboxPlant").addEventListener("click", function (event) {
                window.open("./macandcheese.html", "_blank");
            })
            const a = document.createElement("a");
            document.getElementById("goldboxPlant").innerHTML = " macaroni and cheese";
            document.getElementById("goldboxPlant").style.color = "#bb8822";
        }

        if(document.getElementById("goldboxPlant").innerText.includes("ðŸ²")) {
            document.getElementById("goldboxPlant").addEventListener("mouseover", function (event) {
                document.getElementById("goldboxPlant").innerText = " ðŸŒˆðŸ‚ðŸðŸ€ðŸŒ·ðŸ„ðŸðŸŒˆðŸƒðŸŒºðŸ„";
            }, { once: true })
        } 

        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|android|ipad|playbook|silk/i.test(navigator.userAgent)) {
            document.getElementById("introduction").innerHTML = "JukeBox is an online tool for sketching and sharing chiptune melodies. Make sure that your volume is turned up, then press the play button!";
            document.getElementById("keyboard-instructions").style.display = "none";
            document.getElementById("mobile-instructions").style.display = "";
            document.getElementById("bar-editing").innerHTML = "Tap the boxes to move to a different part of the song, or tap on the currently selected box to swap which pattern is played during that part of the song.";
			//document.getElementById("offline-instructions").innerHTML = 'You can use UltraBox when your device is offline if you put a shortcut to UltraBox on your home screen. <ul><li>Chrome: find the "Add to Home Screen" option in the â‹® menu.</li><li>Firefox: find the "Add Page Shortcut" option in the â‹® menu.</li><li>Safari: find the "Add to Home Screen" option in the bookmark menu.</li></ul>';
        }

        function browserHasRequiredFeatures() {
            "use strict";
            if (window.AudioContext == undefined && window.webkitAudioContext == undefined) {
                return false;
            }

            try {
                eval("class T {}");
                eval("const a = () => 0");
                eval("for (const a of []);");
            } catch (error) {
                return false;
            }

            return true;
        }

        if (browserHasRequiredFeatures()) {
            // Go ahead and load js beepbox editor interface:
            var fileref = document.createElement("script");
            fileref.setAttribute("type", "text/javascript");
            if ((date.getDate() == 1) && date.getMonth() == 3) {
                fileref.setAttribute("src", "foolish_editor.min.js");
            } else {
                fileref.setAttribute("src", "beepbox_editor.min.js");
            }
            document.head.appendChild(fileref);
        } else {
            document.getElementById("beepboxEditorContainer").innerHTML = "Sorry, JukeBox doesn't support your browser. Try a recent version of Chrome, Firefox, Edge, Safari, or Opera.";
        }

		// If the page was loaded with an old song version that old versions of BeepBox support,
		// update the links to the old versions so that they'll open the song.
	    //HEY, ULTRABOX DOESN'T HAVE THESE, WHAT DO WE DO????
		if (/^#[1-6]/.test(location.hash)) {
			document.getElementById("linkTo2_3").href += location.hash;
		}
		if (/^#[1-8]/.test(location.hash)) {
			document.getElementById("linkTo3_0").href += location.hash;
		}
    </script>
</body>
</html>
